<!DOCTYPE html>
<html>
  <head>

    <meta charset="utf-8">
    <meta name="description" content="norseman">

    <!-- Includes for fullpage.js library https://github.com/alvarotrigo/fullPage.js/ -->
    <link rel="stylesheet" type="text/css" href="lib/fullpage.js/jquery.fullPage.css" />
    
    <!-- Minified JQuery library -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script type="text/javascript" src="lib/fullpage.js/jquery.fullPage.min.js"></script>

    <!-- Other includes -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <link href='http://fonts.googleapis.com/css?family=Parisienne' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Slabo+27px' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Playfair+Display+SC' rel='stylesheet' type='text/css'> 
    <link href='http://fonts.googleapis.com/css?family=Fauna+One' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>
    
    <!--Parse-->
    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.4.0.min.js"></script>

  </head>
  <body id="body" class="fp-viewing-0 hidden">

    <section id="fullpage">
      <section class="section" id="page1">
        <header>The Norseman</header>
        <footer onclick="$.fn.fullpage.moveTo(2);">
          Menu
          <i class="fa fa-hand-o-down fa-lg"></i>
        </footer>
      </section>
      

    </section>
    
    <!-- JQuery -->
    <script>
      Parse.initialize("bUpIWG3XoPGQxsS3r1vNfDiDzKExyvUBru97msYU", "TTOqKMRGEhNEeTOuOoPu5hEqdjPf9HX1JXnLU3x8");

      var pageElement = '<section class="section page">' +
                            '<section class="placeholder">' +
                              '<header class="name"></header>' +   //name
                              '<section class="description"></section>' + //description
                              '<footer>' +
                                '<i class="fa fa-usd"></i>' +
                                '<span class="price"></span>' +     //price
                              '</footer>' +
                            '</section>' +
                          '</section>';

      var NorsemanMenuObject = Parse.Object.extend("NorsemanMenuObject");
      var norsemanMenuObject = new NorsemanMenuObject();
      norsemanMenuObject.fetch({
        success: function(myObject) {
          console.log(myObject);
          myObject.attributes.results.forEach(function(element, i) {
            $(pageElement).insertAfter(".section:nth(" + (i) + ")");
            if(element.background) {
            $(".page:nth(" + i + ")").css({
                                            "background": "url(" + element.background._url + ") no-repeat center center",
                                            "background-size": "cover"
                                          });
            }
            $(".page:nth(" + i + ") .placeholder").addClass(element.placeholder);
            $(".page:nth(" + i + ") .name").text(element.name);
            $(".page:nth(" + i + ") .description").text(element.description);
            $(".page:nth(" + i + ") .price").text(element.price);
          });

          initFullPage();
        },
        error: function(myObject, error) {
          alert('Failed to fetch an object, with error code: ' + error.message);
        }
      });

      function initFullPage() {
        $('#fullpage').fullpage({
          'navigation': true,
          'menu': true,
          'verticalCentered': false,
          'easingcss3': 'ease-in-out'
        });
        $('body').removeClass('hidden');
      }

    </script>
  </body>
</html>
